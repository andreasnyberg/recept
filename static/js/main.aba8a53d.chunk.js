(this.webpackJsonprecipes=this.webpackJsonprecipes||[]).push([[0],{63:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var c,a,i,s,r=n(12),o=n(2),l=n.n(o),j=n(49),b=n.n(j),u=n(13),d=n(7),O=(n(63),n(9)),p=n(21),h=n(86),x=n(90),m="auth-token",g=n(1),f=Object(h.a)(c||(c=Object(p.a)(["\n  mutation LoginMutation(\n    $email: String!\n    $password: String!\n  ) {\n    login(email: $email, password: $password) {\n      token\n    }\n  }\n"]))),v=function(){var e=Object(o.useState)(!1),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(o.useState)(""),i=Object(O.a)(a,2),s=i[0],r=i[1],l=Object(o.useState)(""),j=Object(O.a)(l,2),b=j[0],d=j[1],p=localStorage.getItem(m),h=Object(x.a)(f,{variables:{email:s,password:b},onCompleted:function(e){var t=e.login;localStorage.setItem(m,t.token),window.location.reload()}}),v=Object(O.a)(h,1)[0];return Object(g.jsxs)("header",{className:"header",children:[p&&Object(g.jsxs)(u.c,{to:"/add-new",className:"button border-button",children:["Nytt recept",Object(g.jsx)("span",{children:"\u2795"})]}),p?Object(g.jsx)("button",{onClick:function(){localStorage.removeItem(m),window.location.reload()},className:"button border-button",children:"Logga ut"}):Object(g.jsx)("button",{onClick:function(){return c(!0)},className:"button border-button",children:"Logga in"}),n&&Object(g.jsx)("div",{className:"login-window",children:Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),v()},children:[Object(g.jsx)("input",{type:"text",value:s,onChange:function(e){r(e.target.value)},placeholder:"E-post",className:"recipe-input"}),Object(g.jsx)("input",{type:"password",value:b,onChange:function(e){d(e.target.value)},placeholder:"L\xf6senord",className:"recipe-input"}),Object(g.jsx)("input",{type:"submit",value:"Logga in",className:"button border-button"})]})})]})},N=n(38),y=Object(h.a)(a||(a=Object(p.a)(["\n  mutation CreateRecipeMutation($input: RecipeInput) {\n    createRecipe(input: $input) {\n      pathTitle\n    }\n  }\n"]))),k=function(){var e=Object(o.useState)(""),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(o.useState)(!1),i=Object(O.a)(a,2),s=i[0],l=i[1],j=Object(o.useState)({val:["",""]}),b=Object(O.a)(j,2),u=b[0],p=b[1],h=Object(o.useState)([]),f=Object(O.a)(h,2),v=f[0],k=(f[1],Object(o.useState)({title:"",source:"",noOfPortions:"",ingredients:""})),S=Object(O.a)(k,2),w=S[0],C=S[1],T=localStorage.getItem(m),$=Object(x.a)(y,{variables:{input:{title:w.title,source:w.source,noOfPortions:w.noOfPortions,categories:v,ingredients:w.ingredients.split("\n").filter((function(e){return e})),steps:u.val}},onError:function(e){console.log(e)},onCompleted:function(e){var t=e.createRecipe;c(t.pathTitle),l(!0)}}),L=Object(O.a)($,1)[0];return T?s?Object(g.jsx)(d.a,{to:"/recept/".concat(n)}):Object(g.jsxs)("div",{className:"add-new-container",children:[Object(g.jsx)("h2",{children:"L\xe4gg till nytt recept"}),Object(g.jsx)("input",{className:"recipe-input recipe-input--big",value:w.title,onChange:function(e){return C(Object(r.a)(Object(r.a)({},w),{},{title:e.target.value}))},type:"text",placeholder:"Titel"}),Object(g.jsxs)("div",{className:"source-and-portions-container",children:[Object(g.jsx)("input",{className:"recipe-input recipe-input--small",value:w.source,onChange:function(e){return C(Object(r.a)(Object(r.a)({},w),{},{source:e.target.value}))},type:"text",placeholder:"L\xe4nk till original"}),Object(g.jsx)("input",{className:"recipe-input recipe-input--small",value:w.noOfPortions,onChange:function(e){return C(Object(r.a)(Object(r.a)({},w),{},{noOfPortions:e.target.value}))},type:"number",placeholder:"Antal portioner"})]}),Object(g.jsxs)("div",{className:"textarea-container",children:[Object(g.jsx)("div",{className:"ingredients-container",children:Object(g.jsx)("textarea",{className:"recipe-input",value:w.ingredients,onChange:function(e){return C(Object(r.a)(Object(r.a)({},w),{},{ingredients:e.target.value}))},placeholder:"Ingredienser"})}),Object(g.jsxs)("div",{className:"steps-container",children:[u.val.map((function(e,t){return Object(g.jsx)("textarea",{autoFocus:t>1,className:"recipe-input",value:e||"",onChange:function(e){return function(e,t){var n=Object(N.a)(u.val);n[t]=e.target.value,p({val:n})}(e,t)},placeholder:"Steg ".concat(t+1)},t)})),Object(g.jsxs)("button",{className:"button border-button border-button--medium add-step-button",type:"button",onClick:function(){p({val:[].concat(Object(N.a)(u.val),[""])})},children:["L\xe4gg till steg ",Object(g.jsx)("span",{children:"\u2795"})]})]})]}),Object(g.jsxs)("button",{className:"button border-button border-button--big post-button",type:"button",onClick:function(){L()},children:["Klar! ",Object(g.jsx)("span",{children:"\u2714\ufe0f"})]})]}):Object(g.jsx)(d.a,{to:"/"})},S=n(83),w=function(e){return Object(g.jsxs)("div",{className:"error-page",children:[e.children,Object(g.jsx)(u.c,{to:"/",className:"button floating-button floating-button--link",children:"Ta mig till startsidan \ud83d\ude80"})]})},C=function(){return Object(g.jsxs)("div",{className:"loading-spinner",children:[Object(g.jsx)("div",{className:"bounce bounce--1"}),Object(g.jsx)("div",{className:"bounce bounce--2"}),Object(g.jsx)("div",{className:"bounce bounce--3"})]})},T=Object(h.a)(i||(i=Object(p.a)(["\n  query recipeQuery($pathTitle: String!)\n  {\n    recipe(pathTitle: $pathTitle) {\n      id\n      title\n      source\n      noOfPortions\n      pathTitle\n      ingredients {\n        id\n        name\n      }\n      steps {\n        id\n        name\n      }\n    }\n  }\n"]))),$=function(){var e=Object(o.useState)(!1),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(d.h)().pathTitle,i=Object(S.a)(T,{variables:{pathTitle:a}}),s=i.loading,r=i.error,l=i.data;if(s)return Object(g.jsx)(C,{});if(r)return Object(g.jsxs)(w,{children:[Object(g.jsx)("h1",{children:"Ajd\xe5! \ud83d\ude15"}),Object(g.jsx)("h3",{children:"Error:"}),Object(g.jsx)("p",{children:r.message})]});var j=l.recipe;return Object(g.jsxs)("div",{className:"recipe ".concat(n?"bigfont-mode":""),children:[Object(g.jsx)("h1",{children:j.title}),(j.noOfPortions||j.source)&&Object(g.jsxs)("div",{className:"recipe-meta",children:[j.noOfPortions&&Object(g.jsxs)("p",{children:[j.noOfPortions," portioner"]}),j.noOfPortions&&j.source&&Object(g.jsx)("span",{className:"recipe-meta-separator",children:"|"}),j.source&&Object(g.jsx)("a",{href:j.source,children:"L\xe4nk till original"})]}),Object(g.jsxs)("div",{className:"recipe-sections",children:[Object(g.jsxs)("div",{className:"recipe-ingredients",children:[Object(g.jsx)("h2",{children:"Ingredienser"}),Object(g.jsx)("ul",{children:j.ingredients.map((function(e){return Object(g.jsx)("li",{children:e.name},e.id)}))})]}),Object(g.jsxs)("div",{className:"recipe-steps",children:[Object(g.jsx)("h2",{children:"Tillagning"}),Object(g.jsx)("ul",{children:j.steps.map((function(e){return Object(g.jsxs)("li",{className:"step-row",children:[Object(g.jsx)("input",{className:"checkbox",id:"recipe-step-checkbox-".concat(e.id),type:"checkbox",value:"value1"}),Object(g.jsx)("label",{htmlFor:"recipe-step-checkbox-".concat(e.id),children:e.name})]},e.id)}))})]})]}),Object(g.jsx)("button",{onClick:function(){c(!n)},className:"button toggle-bigfont-mode floating-button floating-button--round"})]})},L=n(84),P=n(53),I=n.n(P),E=Object(h.a)(s||(s=Object(p.a)(["\n  query RecipeFeedQuery(\n    $filter: String!\n    $orderBy: RecipeOrderByInput\n  ) {\n    recipeFeed(filter: $filter, orderBy: $orderBy) {\n      id\n      recipes {\n        id\n        createdAt\n        title\n        pathTitle\n      }\n    }\n  }\n"]))),B=function(){var e="grid",t=Object(o.useState)(""),n=Object(O.a)(t,2),c=n[0],a=n[1],i=Object(o.useState)(!0),s=Object(O.a)(i,2),r=s[0],l=s[1],j=Object(o.useState)(e),b=Object(O.a)(j,2),d=b[0],p=b[1],h=Object(L.a)(E,{fetchPolicy:"no-cache"}),x=Object(O.a)(h,2),m=x[0],f=x[1].data;Object(o.useEffect)((function(){m({variables:{filter:c,orderBy:{title:r?"asc":"desc"}}})}),[m,c,r]);var v=function(e){console.log("handleSearchChange"),a(e.target.value)},N=Object(o.useMemo)((function(){return I.a.debounce(v,300)}),[]);return Object(g.jsxs)("div",{className:"home",children:[Object(g.jsxs)("div",{className:"list-tools",children:[Object(g.jsx)("div",{className:"list-tools-col--wide",children:Object(g.jsx)("span",{className:"search-icon",children:Object(g.jsx)("input",{type:"text",className:"recipe-input search-input",onChange:N})})}),Object(g.jsx)("div",{className:"list-tools-col",children:Object(g.jsx)("button",{className:"button floating-button list-tool-button list-tool-button--order",onClick:function(){l(!r)},children:Object(g.jsx)("span",{className:"icon ".concat(r?"isAsc":"")})})}),Object(g.jsx)("div",{className:"list-tools-col",children:Object(g.jsx)("button",{className:"button floating-button list-tool-button list-tool-button--list-style",onClick:function(){p(d===e?"list":e)},children:Object(g.jsx)("span",{className:"icon ".concat(d===e?"isGrid":"")})})})]}),Object(g.jsx)("ul",{className:"recipe-list ".concat(d),children:f&&Object(g.jsx)(g.Fragment,{children:f.recipeFeed.recipes.map((function(e){return Object(g.jsx)("li",{className:"recipe-list-item",children:Object(g.jsx)(u.c,{to:"/recept/".concat(e.pathTitle),className:"button recipe-link floating-button",children:Object(g.jsx)("h2",{children:e.title})})},e.id)}))})})]})},F=function(e){return function(t){var n=Object(d.g)(),c=Object(o.useCallback)((function(e){27===e.keyCode&&n.push("/")}),[n]);return Object(o.useEffect)((function(){return document.addEventListener("keydown",c),function(){document.removeEventListener("keydown",c)}})),Object(g.jsx)("div",{className:"dialog-outer",children:Object(g.jsx)("div",{className:"dialog",children:Object(g.jsxs)("div",{className:"dialog-inner",children:[Object(g.jsx)(u.c,{to:"/",className:"button dialog-close-button floating-button floating-button--round"}),Object(g.jsx)(e,Object(r.a)({},t))]})})})}};var R=function(e){var t=F($),n=F(k);return Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(u.a,{children:Object(g.jsx)(u.b,{basename:"/",children:Object(g.jsxs)(d.d,{children:[Object(g.jsxs)(d.b,{exact:!0,path:"/",children:[Object(g.jsx)(v,{}),Object(g.jsx)(B,{})]}),Object(g.jsx)(d.b,{path:"/recept/:pathTitle",children:Object(g.jsx)(t,{})}),Object(g.jsx)(d.b,{path:"/add-new",children:Object(g.jsx)(n,{})}),Object(g.jsx)(d.b,{path:"*",children:Object(g.jsxs)(w,{children:[Object(g.jsx)("h1",{children:"Ooops.."}),Object(g.jsx)("h3",{children:"Denna sida verkar inte existera \ud83d\ude15"})]})})]})})})})},A=n(55),M=n(87),q=n(88),D=n(85),J=n(54),Q=Object(A.a)({uri:"/graphql"}),z=Object(J.a)((function(e,t){var n=t.headers,c=localStorage.getItem(m);return{headers:Object(r.a)(Object(r.a)({},n),{},{authorization:c?"Bearer ".concat(c):""})}})),G=new M.a({link:z.concat(Q),cache:new q.a});b.a.render(Object(g.jsx)(l.a.StrictMode,{children:Object(g.jsx)(D.a,{client:G,children:Object(g.jsx)(R,{})})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.aba8a53d.chunk.js.map